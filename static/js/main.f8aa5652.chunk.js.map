{"version":3,"sources":["resources/ding.mp3","resources/waterdrop2.mp3","resources/computerError2.mp3","components/TradeTableButton.js","components/TradeTable.js","components/StalkMarketTable.js","components/YourInformation.js","components/YourStalkTable.js","components/StalkUtil.js","components/TradeMainPage.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","TradeTableButton","props","state","isLoading","actionType","trade","icon","onHandleClick","toggleLoading","bind","console","log","this","setState","buttonContent","Fragment","Button","Content","visible","hidden","Icon","name","self","animated","onClick","seller","turnipCode","buyer","Component","TradeTable","type","islanderSide","index","Table","Cell","style","width","verticalAlign","color","prevState","islands","length","previousIsland","Label","as","ribbon","href","description","dodoCodes","tag","turnipPrice","yourPlaces","maxQueue","queuedStr","trades","sectionIcon","sectionName","Divider","horizontal","Header","createHeader","celled","striped","Row","HeaderCell","colSpan","createBody","statuses","queueIDs","StalkMarketTable","seconds","myInterval","setInterval","queuedPos","positive","createTradeRow","createActionButton","negative","message","map","createHighlightedRows","Body","goodTrades","filter","subparTrades","sort","a","b","createConditionRows","YourInformation","Input","defaultValue","visitorName","onChange","onInfoChanged","YourStalkTable","status","Segment","action","data","visitors","visitor","key","$id","place","JSON","stringify","timestamp","Date","toLocaleTimeString","island","panels","title","content","Accordion","exclusive","defaultActiveIndex","fluid","sellSide","buySide","reverse","isSkippableStatus","push","getStatusColor","getRibbonMessage","getStatusMessage","createAccordion","colspan","createStatusRows","StalkUtil","ms","Promise","resolve","setTimeout","TradeMainPage","cookies","Cookies","visitorIDs","failedTrades","get","yourTrades","turnipQueueIDs","handlePing","handleJoin","handleInfo","handleYourPlaces","handleVisitorID","handleReconnect","currentButtonElement","visitorID","ws","WebSocket","reject","onopen","event","send","onerror","onmessage","obj","parse","undefined","autoSave","side","success","mapping","yourPlace","onIsland","dodoCode","playSound","window","location","indexOf","url","callback","fetch","handleURLBase","then","response","json","sellerTurnipCode","buyerTurnipCode","callBack","sleepCount","seller_url","handleFetch","sleep","buyer_url","setTrades","getTrades","element","statues","handleQueue","sellerIsland","buyerIsland","islandName","reason","alert","rId","splice","audioEl","document","getElementsByClassName","play","res","ok","Error","catch","error","notify","getTradesServer","set","path","autoPing","ReactGA","initialize","pageview","autoRefresh","isDevelopment","initializeGA","target","value","Container","ref","alertSound","handleClick","className","src","dingMP3","errorMP3","waterdropMP3","App","Boolean","hostname","match","styleLink","createElement","rel","head","appendChild","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f8aa5652.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ding.2d524655.mp3\";","module.exports = __webpack_public_path__ + \"static/media/waterdrop2.31a564d2.mp3\";","module.exports = __webpack_public_path__ + \"static/media/computerError2.6583b7bd.mp3\";","import React, { Component } from \"react\";\nimport { Button, Icon } from \"semantic-ui-react\";\n\nclass TradeTableButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { isLoading: true };\n    this.actionType = this.props.actionType;\n    this.trade = this.props.trade;\n    this.icon = this.props.icon;\n    this.onHandleClick = this.props.onHandleClick;\n    this.toggleLoading = this.toggleLoading.bind(this);\n  }\n\n  toggleLoading() {\n    console.log(\"Toggle Loading...\");\n    this.setState((state) => ({\n      isLoading: !state.isLoading,\n    }));\n  }\n\n  render() {\n    let buttonContent;\n    if (this.state.isLoading) {\n      buttonContent = (\n        <React.Fragment>\n          <Button.Content visible>{this.icon}</Button.Content>\n          <Button.Content hidden>{this.actionType}</Button.Content>\n        </React.Fragment>\n      );\n    } else {\n      buttonContent = (\n        <React.Fragment>\n          <Button.Content visible>\n            <Icon name=\"spinner\" />\n          </Button.Content>\n          <Button.Content hidden>Loading</Button.Content>\n        </React.Fragment>\n      );\n    }\n    let self = this;\n    return (\n      <Button\n        animated=\"vertical\"\n        onClick={function () {\n          self.onHandleClick(\n            self,\n            self.actionType,\n            self.trade.seller.turnipCode,\n            self.trade.buyer.turnipCode\n          );\n          self.toggleLoading();\n        }}\n      >\n        {buttonContent}\n      </Button>\n    );\n  }\n}\n\nexport default TradeTableButton;\n","import React, { Component } from \"react\";\nimport { Label, Table, Divider, Header } from \"semantic-ui-react\";\nimport TradeTableButton from \"./TradeTableButton\";\nclass TradeTable extends Component {\n  /* Component Rendering */\n  createActionButton(actionType, trade, icon) {\n    return (\n      <TradeTableButton\n        onHandleClick={this.props.onHandleClick}\n        actionType={actionType}\n        trade={trade}\n        icon={icon}\n      />\n    );\n  }\n\n  createTradeRow(type, islanderSide, index) {\n    if (!islanderSide) {\n      return (\n        <React.Fragment>\n          <Table.Cell style={{ width: 300 }} verticalAlign=\"top\">\n            No Information.\n          </Table.Cell>\n          <Table.Cell>--</Table.Cell>\n          <Table.Cell>--</Table.Cell>\n        </React.Fragment>\n      );\n    }\n    let color = \"white\";\n    if (\n      index !== -1 &&\n      this.prevState &&\n      this.prevState.islands.length > index\n    ) {\n      let previousIsland;\n      switch (type) {\n        case \"seller\":\n          previousIsland = this.prevState.islands[index].seller;\n          break;\n        case \"buyer\":\n          previousIsland = this.prevState.islands[index].buyer;\n          break;\n        default:\n          break;\n      }\n      if (previousIsland.turnipCode !== islanderSide.turnipCode) {\n        color = \"teal\";\n      }\n    }\n\n    return (\n      <React.Fragment>\n        <Table.Cell style={{ width: 300 }} verticalAlign=\"top\">\n          {/* <Transition.Group animation={\"flash\"} duration={1000} visible={true}> */}\n          <Label as=\"a\" color={color} ribbon>\n            <a\n              href={\"https://turnip.exchange/island/\" + islanderSide.turnipCode}\n            >\n              {islanderSide.name}\n            </a>\n          </Label>\n          {/* this will mess up the table: fix this */}\n          <span>{islanderSide.description}</span>\n          <span>\n            <br />\n            {this.props.dodoCodes &&\n            this.props.dodoCodes[islanderSide.turnipCode] ? (\n              <Label as=\"a\" color=\"green\">\n                {this.props.dodoCodes[islanderSide.turnipCode]}\n              </Label>\n            ) : (\n              \"\"\n            )}\n          </span>\n          {/* </Transition.Group> */}\n        </Table.Cell>\n        <Table.Cell>\n          <Label tag>${islanderSide.turnipPrice}</Label>\n        </Table.Cell>\n        <Table.Cell>\n          {/* you should abstract below out and make it more specific to the said component */}\n          {this.props.yourPlaces &&\n          this.props.yourPlaces[islanderSide.turnipCode]\n            ? this.props.yourPlaces[islanderSide.turnipCode] +\n              \"/\" +\n              islanderSide.maxQueue\n            : islanderSide.queuedStr}\n        </Table.Cell>\n      </React.Fragment>\n    );\n  }\n\n  createBody(trades) {\n    console.log(\"Error: Empty body\");\n  }\n\n  createHeader(sectionIcon, sectionName) {\n    return (\n      <Divider horizontal>\n        <Header as=\"h4\">\n          {sectionIcon}\n          {sectionName}\n        </Header>\n      </Divider>\n    );\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.createHeader(this.props.sectionIcon, this.props.sectionName)}\n        <Table celled striped>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell colSpan=\"3\">Daisy</Table.HeaderCell>\n              <Table.HeaderCell colSpan=\"3\">Tommy</Table.HeaderCell>\n              <Table.HeaderCell>&nbsp;</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          {this.createBody(\n            this.props.trades,\n            this.props.statuses,\n            this.props.queueIDs\n          )}\n        </Table>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default TradeTable;\n","import React from \"react\";\nimport { Icon, Table, Divider, Header } from \"semantic-ui-react\";\nimport TradeTable from \"./TradeTable\";\n\nclass StalkMarketTable extends TradeTable {\n  state = {\n    seconds: 30,\n  };\n\n  componentDidMount() {\n    this.myInterval = setInterval(() => {\n      if (this.state.seconds <= 0) {\n        this.state.seconds = 30;\n      }\n      this.setState(({ seconds }) => ({\n        seconds: seconds - 1,\n      }));\n      // console.log(\"Seconds: \" + this.state.seconds);\n    }, 1000);\n  }\n\n  createHeader(sectionIcon, sectionName) {\n    return (\n      <Divider horizontal>\n        <Header as=\"h4\">\n          {sectionIcon}\n          {sectionName} ({this.state.seconds})\n        </Header>\n      </Divider>\n    );\n  }\n\n  createHighlightedRows(trade, index) {\n    if (trade.buyer.queuedPos - trade.seller.queuedPos < 16) {\n      return (\n        <Table.Row positive>\n          {this.createTradeRow(\"seller\", trade.seller, index)}\n          {this.createTradeRow(\"buyer\", trade.buyer, index)}\n          <Table.Cell>\n            {this.createActionButton(\n              \"join\",\n              trade,\n              <Icon name=\"angle double up\" />\n            )}\n          </Table.Cell>\n        </Table.Row>\n      );\n    } else if (\n      trade.buyer.queuedPos - trade.seller.queuedPos >= 16 &&\n      trade.buyer.queuedPos - trade.seller.queuedPos < 32\n    ) {\n      return (\n        <Table.Row>\n          {this.createTradeRow(\"seller\", trade.seller, index)}\n          {this.createTradeRow(\"buyer\", trade.buyer, index)}\n          <Table.Cell>\n            {this.createActionButton(\n              \"join\",\n              trade,\n              <Icon name=\"angle double up\" />\n            )}\n          </Table.Cell>\n        </Table.Row>\n      );\n    }\n    return (\n      <Table.Row negative>\n        {this.createTradeRow(\"seller\", trade.seller, index)}\n        {this.createTradeRow(\"buyer\", trade.buyer, index)}\n        <Table.Cell>\n          {this.createActionButton(\n            \"join\",\n            trade,\n            <Icon name=\"angle double up\" />\n          )}\n        </Table.Cell>\n      </Table.Row>\n    );\n  }\n  createConditionRows(trades, message) {\n    if (trades.length <= 0) {\n      return (\n        <Table.Row>\n          <Table.Cell colSpan=\"7\">\n            <Icon name=\"x\" />\n            {message}\n          </Table.Cell>\n        </Table.Row>\n      );\n    } else {\n      return trades.map((trade, index) =>\n        this.createHighlightedRows(trade, index)\n      );\n    }\n  }\n\n  createBody(trades) {\n    if (trades.length <= 0) {\n      return (\n        <Table.Body>\n          <Table.Row>\n            <Table.Cell colSpan=\"7\">\n              <Icon name=\"hourglass start\" />\n              Please wait...\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n      );\n    }\n    let goodTrades = trades.filter((trade) => trade.buyer.turnipPrice >= 300);\n    let subparTrades = trades.filter(\n      (trade) => trade.buyer.turnipPrice >= 190 && trade.buyer.turnipPrice < 300\n    );\n    goodTrades.sort((a, b) => b.buyer.turnipPrice - a.buyer.turnipPrice);\n    subparTrades.sort((a, b) => b.buyer.turnipPrice - a.buyer.turnipPrice);\n\n    return (\n      <Table.Body>\n        <Table.Row>\n          <Table.HeaderCell colSpan=\"7\">\n            <Icon name=\"announcement\" />\n            These ones are superb - Tommy's price > $300\n          </Table.HeaderCell>\n        </Table.Row>\n        {this.createConditionRows(\n          goodTrades,\n          \"No good trades are available now.\"\n        )}\n        <Table.Row>\n          <Table.HeaderCell colSpan=\"7\">\n            <Icon name=\"dont\" />\n            These ones are less than ideal - Tommy's price ($190 - $300)\n          </Table.HeaderCell>\n        </Table.Row>\n        {this.createConditionRows(\n          subparTrades,\n          \"No subpar trades are available now.\"\n        )}\n      </Table.Body>\n    );\n  }\n}\n\nexport default StalkMarketTable;\n","import React, { Component } from \"react\";\nimport { Icon, Input, Divider, Header } from \"semantic-ui-react\";\n\nclass YourInformation extends Component {\n  render() {\n    return (\n      <React.Fragment>\n        <Divider horizontal>\n          <Header as=\"h4\">\n            <Icon name=\"info circle\" />\n            Your Information\n          </Header>\n        </Divider>\n        <Input\n          name=\"Name\"\n          defaultValue={this.props.visitorName}\n          onChange={this.props.onInfoChanged}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default YourInformation;\n","import React from \"react\";\nimport { Icon, Table, Segment, Label, Accordion } from \"semantic-ui-react\";\nimport TradeTable from \"./TradeTable\";\n\nclass YourStalkTable extends TradeTable {\n  createStatusSegment(status) {\n    console.log(\"Creating status segment\");\n    return (\n      <Segment>\n        {status.action} - {status.data}\n      </Segment>\n    );\n  }\n\n  getStatusColor(type) {\n    switch (type) {\n      case \"islandUpdated\":\n        return \"purple\";\n      case \"queueUpdated\":\n        return \"olive\";\n      case \"alert\":\n        return \"red\";\n      default:\n        return \"grey\";\n    }\n  }\n\n  getStatusMessage(data, queueIDs) {\n    switch (data.action) {\n      case \"joined\":\n        return \"joined queue.\";\n      case \"islandUpdated\":\n        return data.data.description;\n      case \"queueUpdated\":\n        var message = \"you are not in the queue?\";\n        data.data.visitors.map((visitor) => {\n          for (let key in queueIDs) {\n            if (queueIDs[key] === visitor.$id) {\n              message = \"your place: \" + visitor.place;\n            }\n          }\n        });\n        return message;\n      case \"alert\":\n        return data.data.message;\n      default:\n        return JSON.stringify(data);\n    }\n  }\n\n  getRibbonMessage(data) {\n    if (data.data.timestamp) {\n      return new Date(data.data.timestamp * 1000).toLocaleTimeString();\n    }\n    switch (data.action) {\n      case \"queueUpdated\":\n      case \"joined\":\n        return <Icon name=\"thumbs up\" />;\n      case \"islandUpdated\":\n        return <Icon name=\"exclamation circle\" />;\n      case \"alert\":\n        return <Icon name=\"times circle\" />;\n      default:\n        return <Icon name=\"question circle\" />;\n    }\n  }\n\n  isSkippableStatus(data) {\n    switch (data.action) {\n      //   case \"joined\":\n      case \"testing\":\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  createAccordion(turnipCode, island, data) {\n    if (data.length > 0) {\n      let panels = [\n        {\n          key: turnipCode,\n          title: {\n            content: (\n              <Label color=\"grey\" horizontal>\n                <Icon name=\"unordered list\" />\n                {island.name + \"'s events\"}\n              </Label>\n            ),\n          },\n          content: data,\n        },\n      ];\n      return (\n        <Accordion\n          panels={panels}\n          exclusive={false}\n          defaultActiveIndex={[0]}\n          fluid\n        />\n      );\n    }\n  }\n  createStatusRows(trade, statuses, queueIDs) {\n    let sellSide = [];\n    let buySide = [];\n    if (statuses[trade.seller.turnipCode]) {\n      statuses[trade.seller.turnipCode].reverse().map((status) =>\n        !this.isSkippableStatus(status)\n          ? sellSide.push(\n              <React.Fragment>\n                <Segment color={this.getStatusColor(status.action)}>\n                  <Label color={this.getStatusColor(status.action)} ribbon>\n                    {this.getRibbonMessage(status)}\n                  </Label>\n                  {this.getStatusMessage(status, queueIDs)}\n                </Segment>\n              </React.Fragment>\n            )\n          : sellSide\n      );\n    }\n    if (statuses[trade.buyer.turnipCode]) {\n      statuses[trade.buyer.turnipCode].reverse().map((status) =>\n        !this.isSkippableStatus(status)\n          ? buySide.push(\n              <React.Fragment>\n                <Segment color={this.getStatusColor(status.action)}>\n                  <Label color={this.getStatusColor(status.action)} ribbon>\n                    {this.getRibbonMessage(status)}\n                  </Label>\n                  {this.getStatusMessage(status, queueIDs)}\n                </Segment>\n              </React.Fragment>\n            )\n          : buySide\n      );\n    }\n\n    // \"{\"action\":\"alert\",\"data\":{\"turnipCode\":\"8a2312de\",\"message\":\"Visitors of hornyland, your attention, please.<br><br> \\n\\t\\t\\t\\t\\tWe have detected this islands gates are no longer responding. I\n    // \"{\"action\":\"queueUpdated\",\"data\":{\"turnipCode\":\"f421e430\",\"timestamp\":1589230865,\"visitorCount\":1,\"visitors\":[{\"$id\":10533268,\"name\":\"Katie Bug\",\"place\":1,\"time\":4},{\"$id\":10533757,\"nam\n    // \"{\"action\":\"islandUpdated\",\"data\":{\"description\":\"there is no fee but i'm in desperate need of nmt so it would be nice if you could bring some but that's it\",\"locked\":1,\"private\":0,\"paused\n    return (\n      <Table.Row>\n        <Table.Cell colSpan=\"3\" verticalAlign=\"top\">\n          {this.createAccordion(\n            trade.seller.turnipCode,\n            trade.seller,\n            sellSide\n          )}\n        </Table.Cell>\n        <Table.Cell colSpan=\"3\" verticalAlign=\"top\">\n          {this.createAccordion(trade.buyer.turnipCode, trade.buyer, buySide)}\n        </Table.Cell>\n        <Table.Cell></Table.Cell>\n      </Table.Row>\n    );\n  }\n\n  createBody(trades, statuses, queueIDs) {\n    return (\n      <Table.Body>\n        {trades.map((trade, index) => (\n          <React.Fragment>\n            <Table.Row>\n              {this.createTradeRow(\"seller\", trade.seller, -1)}\n              {this.createTradeRow(\"buyer\", trade.buyer, -1)}\n              <Table.Cell>\n                {this.createActionButton(\n                  \"leave\",\n                  trade,\n                  <Icon name=\"angle double down\" />\n                )}\n\n                {/* {this.createActionButton(\n                  \"grab\",\n                  trade,\n                  <Icon name=\"angle double right\" />\n                )}\n                {this.createActionButton(\n                  \"ping\",\n                  trade,\n                  <Icon name=\"angle double left\" />\n                )} */}\n              </Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell colspan=\"7\">Status: </Table.Cell>\n            </Table.Row>\n            {this.createStatusRows(trade, statuses, queueIDs)}\n          </React.Fragment>\n        ))}\n      </Table.Body>\n    );\n  }\n}\n\nexport default YourStalkTable;\n","class StalkUtil {\n  static sleep(ms) {\n    console.log(\"Going to sleep for \" + ms + \"ms\");\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n}\n\nexport default StalkUtil;\n","import React, { Component } from \"react\";\nimport { Icon, Container, Label, Segment } from \"semantic-ui-react\";\nimport Cookies from \"universal-cookie\";\nimport StalkMarketTable from \"./StalkMarketTable\";\nimport YourInformation from \"./YourInformation\";\nimport YourStalkTable from \"./YourStalkTable\";\nimport StalkUtil from \"./StalkUtil\";\nimport ReactAudioPlayer from \"react-audio-player\";\nimport dingMP3 from \"../resources/ding.mp3\";\nimport waterdropMP3 from \"../resources/waterdrop2.mp3\";\nimport errorMP3 from \"../resources/computerError2.mp3\";\n// import Facilitator from \"../../../bkup/utils/facilitator\";\nimport ReactGA from \"react-ga\";\nclass TradeMainPage extends Component {\n  constructor(props) {\n    super(props);\n\n    const cookies = new Cookies();\n    this.cookies = cookies;\n    this.visitorIDs = {};\n    this.failedTrades = {};\n    if (!cookies.get(\"tradeState\")) {\n      this.state = {\n        islands: [],\n        visitorName: \"\",\n        yourPlaces: [],\n        yourTrades: [],\n        visitorIDs: {},\n        dodoCodes: {},\n        turnipQueueIDs: {},\n      };\n    } else {\n      this.state = {\n        islands: [],\n        visitorIDs: cookies.get(\"visitorIDs\"),\n        visitorName: cookies.get(\"visitorName\"),\n        yourTrades: cookies.get(\"yourTrades\"),\n        yourPlaces: cookies.get(\"yourPlaces\"),\n        turnipQueueIDs: cookies.get(\"turnipQueueIDs\"),\n        dodoCodes: {},\n      };\n      this.visitorIDs = cookies.get(\"visitorIDs\");\n    }\n    this.state.statuses = {};\n    this.handlePing = this.handlePing.bind(this);\n    this.handleJoin = this.handleJoin.bind(this);\n    this.handleInfo = this.handleInfo.bind(this);\n    this.handleYourPlaces = this.handleYourPlaces.bind(this);\n    this.handleVisitorID = this.handleVisitorID.bind(this);\n    this.handleReconnect = this.handleReconnect.bind(this);\n    this.currentButtonElement = null;\n  }\n\n  handleReconnect() {\n    for (let turnipCode in this.visitorIDs) {\n      let visitorID = this.visitorIDs[turnipCode];\n      console.log(\"Trying to reconnect: (\" + turnipCode + \") - \" + visitorID);\n      this.handleVisitorID(turnipCode, visitorID);\n    }\n  }\n\n  handleVisitorID(turnipCode, visitorID) {\n    console.log(\"handleVisitorID: \" + turnipCode);\n    let wss_url =\n      \"wss://w92pvtybp7.execute-api.us-west-2.amazonaws.com/production\";\n    const ws = new WebSocket(wss_url);\n    var self = this;\n\n    return new Promise(function (resolve, reject) {\n      ws.onopen = function (event) {\n        let data = {\n          action: \"join\",\n          turnipCode: turnipCode,\n          visitorID: visitorID, // null to create a new one.\n        };\n        ws.send(JSON.stringify(data));\n      };\n      ws.onerror = function (event) {\n        console.log(\"Error opening ws connection\");\n        console.log(event);\n        reject();\n      };\n\n      ws.onmessage = function (event) {\n        console.log(event);\n        let obj = JSON.parse(event.data);\n        if (!self.state.statuses[turnipCode]) {\n          self.state.statuses[turnipCode] = [];\n        }\n        self.state.statuses[turnipCode].push({\n          action: obj.action,\n          data: obj.data,\n        });\n\n        self.setState({\n          statuses: self.state.statuses,\n        });\n        console.log(\"Status Updated:\");\n        console.log(self.state.statuses);\n        switch (obj.action) {\n          case \"joined\":\n            if (obj.data.visitorID !== undefined) {\n              self.state.visitorID = obj.data.visitorID;\n              console.log(\n                \"VisitorID obtained for (\" +\n                  turnipCode +\n                  \"): \" +\n                  self.state.visitorID\n              );\n\n              self.visitorIDs[turnipCode] = obj.data.visitorID;\n              self.autoSave();\n            }\n            break;\n          case \"queueUpdated\":\n            obj.data.visitors.map((visitor) => {\n              for (let key in self.state.turnipQueueIDs) {\n                if (self.state.turnipQueueIDs[key] === visitor.$id) {\n                  // message = \"your place: \" + visitor.place;\n                  console.log(\"[WS] visitor.place: \" + visitor.place);\n                  if (!self.state.yourPlaces) {\n                    self.state.yourPlaces = {};\n                  }\n                  self.state.yourPlaces[key] = visitor.place;\n                  self.setState({\n                    yourPlaces: self.state.yourPlaces,\n                  });\n                }\n              }\n            });\n            break;\n          default:\n            console.log(\"Unknown wss action: \" + obj.action);\n        }\n        console.log(\"done handling ws\");\n        resolve();\n      };\n    });\n  }\n\n  handleYourPlaces(action, data, turnipCode) {\n    switch (action) {\n      case \"update\":\n        if (data[\"yourPlace\"]) {\n          // this condition is only for playing the sound.\n          // if (this.state.yourPlaces[turnipCode] !== data.yourPlace) {\n          //   // this.waterdrop.audioEl.current.play();\n          //   console.log(\"Do you still need this code path?\");\n          // }\n          // Investigation: why is this failing?\n          // this.state.yourPlaces[turnipCode] = data.yourPlace;\n        }\n        break;\n      case \"remove\":\n        if (this.state.yourPlaces[turnipCode]) {\n          delete this.state.yourPlaces[turnipCode];\n        }\n        break;\n      default:\n        console.log(\"unknown your places' action type\");\n        break;\n    }\n    this.autoSave();\n  }\n\n  handleJoin(side, turnipCode, data) {\n    console.log(\"Join: \" + side);\n    console.log(data);\n    if (side === \"sell\") {\n    } else if (side === \"buy\") {\n    }\n\n    if (!data.success) {\n      // that means we couldn't join for some reasons.\n      this.failedTrades[turnipCode] = data.message;\n    } else {\n      // add to $id table\n      // console.log(\"Missing Impl: Should build data.$id-turnipCode map\");\n      // turnipIDMap[turnipCode] = data.$id\n      let mapping =\n        this.state.turnipQueueIDs && this.state.turnipQueueIDs !== \"undefined\"\n          ? this.state.turnipQueueIDs\n          : {};\n      mapping[turnipCode] = data.$id;\n      console.log(\"Obtained IDs\");\n      console.log(mapping);\n      this.setState({\n        turnipQueueIDs: mapping,\n      });\n      // this.state.turnipQueueIDs[turnipCode] = data.$id;\n    }\n\n    // if (type === \"leave\") {\n    //   this.handleYourPlaces(\"remove\", null, turnipCode);\n    // }\n  }\n\n  handleGrab() {\n    // {success: true, message: \"Grabbed code!\", dodoCode: \"6Y81G\"}\n    // {success: true, grabbed: false}\n  }\n\n  handlePing(side, turnipCode, data) {\n    console.log(\"Ping: \" + side);\n    console.log(data);\n    if (side === \"sell\") {\n    } else if (side === \"buy\") {\n    }\n    if (!data.yourPlace && data.onIsland) {\n      console.log(\"Uh-oh: you've lost your place \" + side + \":\" + turnipCode);\n      data.yourPlace = \"-1\";\n    }\n\n    this.handleYourPlaces(\"update\", data, turnipCode);\n    console.log(this.state.yourPlaces);\n    // do you want to differentiate by data?\n    // grab has dodoCode (ping might have it too)\n    //\n    if (data.success) {\n      // data.dodoCode should appear in both pinging and grabbing.\n      if (data.dodoCode) {\n        // play the ding.\n        // this.ding.audioEl.current.play();\n        this.state.dodoCodes[turnipCode] = data.dodoCode;\n        this.playSound(\"ding\");\n      } else {\n        console.log(\"no dodocode\");\n      }\n    }\n  }\n\n  handleURLBase() {\n    console.log(\"handleURLbase\");\n    if (window.location.href.indexOf(\"github\") >= 0) {\n      console.log(\"github detected\");\n      return \"https://stalk-business.herokuapp.com\";\n    }\n\n    return \"\";\n  }\n\n  handleFetch(url, side, turnipCode, callback) {\n    fetch(this.handleURLBase() + url)\n      .then((response) => response.json())\n      .then((data) => callback(side, turnipCode, data));\n  }\n\n  async handleQueue(actionType, sellerTurnipCode, buyerTurnipCode) {\n    console.log(\"handleFetch\");\n    var callBack = this.handleJoin;\n    var sleepCount = 3000;\n    if (actionType === \"grab\" || actionType === \"ping\") {\n      callBack = this.handlePing;\n      sleepCount = 0;\n    }\n    if (sellerTurnipCode) {\n      let seller_url =\n        \"/queue/action/\" +\n        actionType +\n        \"/turnipCode/\" +\n        sellerTurnipCode +\n        \"/visitorID/\" +\n        this.visitorIDs[sellerTurnipCode] +\n        \"/visitorName/\" +\n        this.state.visitorName;\n      console.log(\"Fetch: \" + seller_url);\n      this.handleFetch(seller_url, \"sell\", sellerTurnipCode, callBack);\n    }\n\n    if (actionType === \"join\") {\n      await StalkUtil.sleep(sleepCount);\n    }\n\n    if (buyerTurnipCode) {\n      let buyer_url =\n        \"/queue/action/\" +\n        actionType +\n        \"/turnipCode/\" +\n        buyerTurnipCode +\n        \"/visitorID/\" +\n        this.visitorIDs[buyerTurnipCode] +\n        \"/visitorName/\" +\n        this.state.visitorName;\n      console.log(\"Fetch: \" + buyer_url);\n      this.handleFetch(buyer_url, \"buy\", buyerTurnipCode, callBack);\n    }\n\n    if (actionType === \"join\" || actionType === \"leave\") {\n      this.setTrades(actionType, sellerTurnipCode, buyerTurnipCode);\n    } else {\n      this.getTrades();\n    }\n  }\n\n  async handleClick(element, type, sellerTurnipCode, buyerTurnipCode) {\n    console.log(type + \":\" + sellerTurnipCode + \":\" + buyerTurnipCode);\n    this.currentButtonElement = element;\n    if (type === \"join\") {\n      this.playSound(\"waterdrop\");\n      if (!this.state.statues) {\n        this.state.status = {};\n      }\n      if (!this.state.statuses[sellerTurnipCode]) {\n        this.state.statuses[sellerTurnipCode] = [\n          {\n            action: \"testing\",\n            data: \"ABCD\",\n          },\n        ];\n      }\n      if (!this.state.statuses[buyerTurnipCode]) {\n        this.state.statuses[buyerTurnipCode] = [\n          {\n            action: \"testing\",\n            data: \"ABCD\",\n          },\n        ];\n      }\n      // TODO:  if i join again without leaving (e.g. add more trades)\n      //        i should be able to reuse my visitorID?\n      console.log(\"Generating visitorID\");\n      await this.handleVisitorID(sellerTurnipCode, null);\n      console.log(\"Generating visitorID\");\n      await this.handleVisitorID(buyerTurnipCode, null);\n    }\n    this.handleQueue(type, sellerTurnipCode, buyerTurnipCode);\n  }\n\n  setTrades(type, sellerTurnipCode, buyerTurnipCode) {\n    // could have used index, but the table gets updated dynamically\n    // so might need to discrepancies\n    // giving up on performance.\n    if (type === \"join\") {\n      let sellerIsland;\n      let buyerIsland;\n      this.state.islands.map((island) => {\n        if (island.seller.turnipCode === sellerTurnipCode) {\n          sellerIsland = island.seller;\n        }\n        if (island.buyer.turnipCode === buyerTurnipCode) {\n          buyerIsland = island.buyer;\n        }\n      });\n      if (!sellerIsland) {\n        console.log(\"seller island not found\");\n      }\n      if (!buyerIsland) {\n        console.log(\"buyer island not found\");\n      }\n      if (\n        this.failedTrades[sellerTurnipCode] ||\n        this.failedTrades[buyerTurnipCode]\n      ) {\n        // play error\n        // notify\n        // this.errorSound.audioEl.current.play();\n        // this.notify(\n        //   \"❌ Unable to join the queues: \" +\n        //     this.failedTrades[sellerIsland.turnipCode]\n        //     ? \"(\" +\n        //         sellerIsland.name +\n        //         \")\" +\n        //         this.failedTrades[sellerIsland.turnipCode]\n        //     : \"\" + this.failedTrades[buyerIsland.turnipCode]\n        //     ? \"(\" +\n        //       buyerIsland.name +\n        //       \")\" +\n        //       this.failedTrades[buyerIsland.turnipCode]\n        //     : \"\"\n        // );\n        console.log(\n          \"Unable to add trade: \" + sellerTurnipCode + \" - \" + buyerTurnipCode\n        );\n        let reason = this.failedTrades[sellerTurnipCode]\n          ? this.failedTrades[sellerTurnipCode]\n          : this.failedTrades[buyerTurnipCode];\n        let turnipCode = this.failedTrades[sellerTurnipCode]\n          ? sellerTurnipCode\n          : buyerTurnipCode;\n        let islandName;\n        for (let island of this.state.islands) {\n          if (island.seller.turnipCode === turnipCode) {\n            islandName = island.seller.name;\n            break;\n          } else if (island.seller.turnipCode === turnipCode) {\n            islandName = island.buyer.name;\n            break;\n          }\n        }\n        alert(\"Unable to join \" + islandName + \"'s queue: \" + reason);\n        this.currentButtonElement.toggleLoading();\n        this.setTrades(\"leave\", sellerTurnipCode, buyerTurnipCode);\n      } else {\n        // all good!\n        this.state.yourTrades.push({\n          seller: sellerIsland,\n          buyer: buyerIsland,\n        });\n      }\n    } else if (type === \"leave\") {\n      let rId = -1;\n      this.state.yourTrades.map((island, index) => {\n        if (\n          island.seller.turnipCode === sellerTurnipCode &&\n          island.buyer.turnipCode === buyerTurnipCode\n        ) {\n          rId = index;\n        }\n      });\n      if (rId > -1) {\n        console.log(\"Removing your trades: \" + rId);\n        this.state.yourTrades.splice(rId, 1);\n      }\n      console.log(\"Removing visitorIDs\");\n      if (this.visitorIDs) {\n        delete this.visitorIDs[sellerTurnipCode];\n        delete this.visitorIDs[buyerTurnipCode];\n      }\n\n      console.log(\"Removing turnipQueueIDs\");\n      if (this.state.turnipQueueIDs) {\n        delete this.state.turnipQueueIDs[sellerTurnipCode];\n        delete this.state.turnipQueueIDs[buyerTurnipCode];\n      }\n    }\n    this.setState({\n      yourTrades: this.state.yourTrades,\n    });\n    this.autoSave();\n    this.currentButtonElement.toggleLoading();\n  }\n\n  notify(message) {\n    // toaster.notify(message, {\n    //   duration: 2000,\n    // });\n  }\n\n  playSound(type) {\n    var audioEl = document.getElementsByClassName(\"audio-element-error\")[0];\n    switch (type) {\n      case \"ding\":\n        audioEl = document.getElementsByClassName(\"audio-element-ding\")[0];\n        break;\n      case \"waterdrop\":\n        audioEl = document.getElementsByClassName(\"audio-element-waterdrop\")[0];\n        break;\n      default:\n    }\n    audioEl.play();\n    // console.log(\"playSound\");\n    // this.alertSound.audioEl.current.src = dingMP3;\n    // this.alertSound.audioEl.current.play();\n  }\n\n  getTradesServer() {\n    fetch(this.handleURLBase() + \"/getTrades\")\n      // fetch(\"/getTradesTest\")\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        return res.json();\n      })\n      .then((islands) => {\n        this.setState({\n          islands: islands,\n          visitorName: this.state.visitorName,\n          visitorIDs: this.visitorIDs,\n        });\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  }\n\n  // async getTradesDirect() {\n  //   let islands = await Facilitator.getTrades();\n  //   this.setState({\n  //     islands: islands,\n  //     visitorName: this.state.visitorName,\n  //     visitorIDs: this.visitorIDs,\n  //   });\n  // }\n  getTrades() {\n    this.prevState = this.state;\n    console.log(\"consolidating trades...\");\n    this.notify();\n    this.getTradesServer();\n    // this.getTradesDirect();\n  }\n\n  autoSave() {\n    console.log(\"auto-saving trade states\");\n    this.cookies.set(\"tradeState\", \"activated\", { path: \"/\" });\n    this.cookies.set(\"visitorIDs\", this.visitorIDs, {\n      path: \"/\",\n    });\n    this.cookies.set(\"visitorName\", this.state.visitorName, { path: \"/\" });\n    // this.cookies.set(\"yourPlaces\", this.state.yourPlaces, { path: \"/\" });\n    this.cookies.set(\"yourTrades\", this.state.yourTrades, { path: \"/\" });\n    this.cookies.set(\"turnipQueueIDs\", this.state.turnipQueueIDs, {\n      path: \"/\",\n    });\n    console.log(\"New values: \");\n    console.log(this.cookies.cookies);\n  }\n\n  autoPing() {\n    console.log(\"auto ping\");\n    this.state.yourTrades.map((trade) => {\n      this.handleQueue(\"ping\", trade.seller.turnipCode, null);\n      this.handleQueue(\"ping\", null, trade.buyer.turnipCode);\n      this.handleQueue(\"grab\", trade.seller.turnipCode, null);\n      this.handleQueue(\"grab\", null, trade.buyer.turnipCode);\n\n      // debug only.\n      // this.state.dodoCodes[trade.seller.turnipCode] = Math.floor(\n      //   Math.random() * 1000\n      // );\n      // this.state.dodoCodes[trade.buyer.turnipCode] = Math.floor(\n      //   Math.random() * 1000\n      // );\n    });\n  }\n\n  autoRefresh() {\n    var self = this;\n    setInterval(function () {\n      self.getTrades();\n      self.autoSave();\n      self.autoPing();\n    }, 30000);\n  }\n\n  isDevelopment() {\n    if (\n      window.location.href.indexOf(\"localhost\") >= 0 ||\n      window.location.href.indexOf(\"127.0.0.1\") >= 0\n    ) {\n      console.log(\"localhost detected\");\n      return true;\n    }\n\n    return false;\n  }\n\n  initializeGA() {\n    ReactGA.initialize(\"UA-166888774-1\");\n    ReactGA.pageview(\"/stalk.business\");\n  }\n\n  componentDidMount() {\n    this.handleReconnect();\n    this.getTrades();\n    this.autoRefresh();\n    if (!this.isDevelopment()) {\n      this.initializeGA();\n    }\n  }\n\n  handleInfo(event) {\n    switch (event.target.name) {\n      case \"Name\":\n        this.state.visitorName = event.target.value;\n        break;\n      default:\n        console.log(\"Warning: unknown event + \" + event.target.name);\n        break;\n    }\n    this.autoSave();\n  }\n\n  handleClear(event) {\n    console.log(\"Clearing visitorID\");\n    this.state.visitorIDs = {};\n    this.autoSave();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Container>\n          {/* <ReactAudioPlayer\n            src={dingMP3}\n            ref={(element) => {\n              this.ding = element;\n            }}\n          />\n          <ReactAudioPlayer\n            src={waterdropMP3}\n            ref={(element) => {\n              this.waterdrop = element;\n            }}\n          />\n          <ReactAudioPlayer\n            src={errorMP3}\n            ref={(element) => {\n              this.errorSound = element;\n            }}\n          /> */}\n          <ReactAudioPlayer\n            ref={(element) => {\n              this.alertSound = element;\n            }}\n          />\n\n          <YourInformation\n            visitorName={this.state.visitorName}\n            onInfoChanged={this.handleInfo.bind(this)}\n          />\n\n          <YourStalkTable\n            trades={this.state.yourTrades}\n            yourPlaces={this.state.yourPlaces}\n            dodoCodes={this.state.dodoCodes}\n            statuses={this.state.statuses}\n            queueIDs={this.state.turnipQueueIDs}\n            sectionName=\"Your Stalks\"\n            sectionIcon={<Icon name=\"dolly\" />}\n            onHandleClick={this.handleClick.bind(this)}\n          />\n          <StalkMarketTable\n            trades={this.state.islands}\n            queueIDs={this.state.turnipQueueIDs}\n            onHandleClick={this.handleClick.bind(this)}\n            sectionName=\"Stalk Market\"\n            sectionIcon={<Icon name=\"money bill alternate\" />}\n          />\n          {\n            // below is ugly, to be refactored\n          }\n          <div>\n            <audio className=\"audio-element-ding\">\n              <source src={dingMP3}></source>\n            </audio>\n          </div>\n          <div>\n            <audio className=\"audio-element-error\">\n              <source src={errorMP3}></source>\n            </audio>\n          </div>\n          <div>\n            <audio className=\"audio-element-waterdrop\">\n              <source src={waterdropMP3}></source>\n            </audio>\n          </div>\n        </Container>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default TradeMainPage;\n","import React from \"react\";\nimport \"./App.css\";\nimport TradeMainPage from \"./components/TradeMainPage\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <div>\n        <TradeMainPage />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\n// Semantic-UI stylesheets\nconst styleLink = document.createElement(\"link\");\nstyleLink.rel = \"stylesheet\";\nstyleLink.href =\n  \"https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css\";\ndocument.head.appendChild(styleLink);\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}